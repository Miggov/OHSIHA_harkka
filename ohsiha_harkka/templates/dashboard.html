<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title></title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <script src="http://maps.google.com/maps/api/js?sensor=false" 
        type="text/javascript"></script>
    </head>
    <body>
        <form action = "app/update" method = "get" id = "update"> 
        <input type = "submit" class = "button" id = "button1" value = "Lataa tiedot rajapinnasta" name = "updateAPI"></form>



        <div id="map" style="width: 500px; height: 400px;"></div>



        <script type="text/javascript">
          var locations = [
          ['Status: B', 61.448357, 23.854091],
          ['Status: B', 61.44835, 23.854307],
          ['Status: B', 61.448205, 23.854023],
          ['Status: B', 61.448176, 23.854292]
          ];
      
          var map = new google.maps.Map(document.getElementById('map'), {
            zoom: 17,
            center: new google.maps.LatLng(61.448357, 23.854091),
            mapTypeId: google.maps.MapTypeId.ROADMAP
          });
      
          var infowindow = new google.maps.InfoWindow();
      
          var marker, i;
      
          for (i = 0; i < locations.length; i++) {  
            marker = new google.maps.Marker({
              position: new google.maps.LatLng(locations[i][1], locations[i][2]),
              map: map
            });
      
            google.maps.event.addListener(marker, 'click', (function(marker, i) {
              return function() {
                infowindow.setContent(locations[i][0]);
                infowindow.open(map, marker);
              }
            })(marker, i));
          }
        </script>

        <div id="list">
          {% block title %}
            <title>Liikennevalot</title>
          {% endblock %}

          {% block content %}
          <table id="list">
            <thead>
              <tr>
                <th>Nimi</th>
                <th>Tila</th>
                <th>X</th>
                <th>Y</th>
              </tr>
            </thead>
            <tbody>
              {% for o in objects %}
              <tr>
                <td>{{o.name}}</td>
                <td>{{o.status}}</td>
                <td>{{o.coordinate_x}}</td>
                <td>{{o.coordinate_y}}</td>
              </tr>
              {% endfor %}
            </tbody>

          </table>
          {% endblock %}
        </div>
        
        
    </body>
</html>